import{a as $}from"./chunk-XRCPTBJR.js";import{Ba as r,Ca as b,Gb as D,Hb as F,Ib as w,Qa as m,Sa as c,Ua as E,Va as e,Wa as n,Xa as _,_ as S,_a as g,db as i,eb as l,fb as y,ia as h,kb as I,lb as C}from"./chunk-JKZU3RR7.js";var U=()=>[1,2,3,4,5];function j(o,d){if(o&1&&(e(0,"tr",11)(1,"td",16),i(2),n(),e(3,"td",16),i(4),n(),e(5,"td",16),i(6),n(),e(7,"td",16)(8,"span",17),i(9),n()()()),o&2){let t=d.$implicit,a=g();r(2),l(t.clienteNome),r(2),l(t.servicoNome),r(2),l(a.formatarDataHora(t.dataHora)),r(2),E("bg-yellow-100",t.status==="Pendente"),r(),y(" ",t.status," ")}}function P(o,d){o&1&&(h(),e(0,"svg",25),_(1,"path",26),n())}function B(o,d){if(o&1&&(e(0,"span"),m(1,P,2,0,"svg",24),n()),o&2){let t=d.$implicit,a=g().$implicit;r(),c("ngIf",t<=a.avaliacao)}}function H(o,d){if(o&1&&(e(0,"div",18)(1,"div",19)(2,"span",20),i(3),n(),e(4,"div",21),m(5,B,2,1,"span",22),n()(),e(6,"p",23),i(7),n()()),o&2){let t=d.$implicit;r(3),l(t.nome),r(2),c("ngForOf",C(3,U)),r(2),l(t.comentario)}}var Y=(()=>{class o{constructor(t){this.apiService=t,this.proximosAgendamentos=[],this.feedbacksRecentes=[]}ngOnInit(){this.carregarDashboard()}carregarDashboard(){this.apiService.get("admin/dashboard").subscribe({next:t=>{this.estatisticas=t.estatisticas,this.proximosAgendamentos=t.proximosAgendamentos,this.feedbacksRecentes=t.feedbacksRecentes},error:t=>{console.error("Erro ao carregar dashboard:",t)}})}formatarDataHora(t){if(!t)return"";try{if(t.match(/^\d{1,2}\/\d{1,2}\/\d{4}/)){let p=t.split(/\s*\//);if(p.length>=3){let O=parseInt(p[0]),N=parseInt(p[1]),x=p[2].split(/\s+/),R=parseInt(x[0]),f=0,v=0;if(x.length>1){let u=x[1].split(":");f=parseInt(u[0])||0,v=parseInt(u[1])||0}return`${N.toString().padStart(2,"0")}/${O.toString().padStart(2,"0")}/${R} ${f.toString().padStart(2,"0")}:${v.toString().padStart(2,"0")}`}}let a=new Date(t);if(isNaN(a.getTime()))return t;let s=a.getUTCDate().toString().padStart(2,"0"),T=(a.getUTCMonth()+1).toString().padStart(2,"0"),k=a.getUTCFullYear(),A=a.getUTCHours().toString().padStart(2,"0"),M=a.getUTCMinutes().toString().padStart(2,"0");return`${s}/${T}/${k} ${A}:${M}`}catch{return t}}static{this.\u0275fac=function(a){return new(a||o)(b($))}}static{this.\u0275cmp=S({type:o,selectors:[["app-dashboard"]],standalone:!0,features:[I],decls:46,vars:6,consts:[[1,"space-y-4","sm:space-y-6"],[1,"text-2xl","sm:text-3xl","font-bold","text-primary","dark:text-white"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-4","gap-4","sm:gap-6"],[1,"card"],[1,"text-sm","text-gray-600","dark:text-gray-300","mb-2"],[1,"text-3xl","font-bold","text-primary","dark:text-white"],[1,"text-3xl","font-bold","text-secondary"],[1,"card","overflow-hidden"],[1,"text-lg","sm:text-xl","font-semibold","mb-4"],[1,"overflow-x-auto"],[1,"w-full","min-w-[600px]"],[1,"border-b"],[1,"text-left","p-2"],["class","border-b",4,"ngFor","ngForOf"],[1,"space-y-4"],["class","border-b pb-4",4,"ngFor","ngForOf"],[1,"p-2"],[1,"px-2","py-1","rounded","text-sm"],[1,"border-b","pb-4"],[1,"flex","items-center","justify-between","mb-2"],[1,"font-semibold"],[1,"flex","text-yellow-400"],[4,"ngFor","ngForOf"],[1,"text-gray-600","text-sm"],["class","w-4 h-4 fill-current","viewBox","0 0 20 20",4,"ngIf"],["viewBox","0 0 20 20",1,"w-4","h-4","fill-current"],["d","M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"]],template:function(a,s){a&1&&(e(0,"div",0)(1,"h1",1),i(2,"Dashboard"),n(),e(3,"div",2)(4,"div",3)(5,"h3",4),i(6,"Agendamentos Hoje"),n(),e(7,"p",5),i(8),n()(),e(9,"div",3)(10,"h3",4),i(11,"Esta Semana"),n(),e(12,"p",5),i(13),n()(),e(14,"div",3)(15,"h3",4),i(16,"Este M\xEAs"),n(),e(17,"p",5),i(18),n()(),e(19,"div",3)(20,"h3",4),i(21,"M\xE9dia Avalia\xE7\xE3o"),n(),e(22,"p",6),i(23),n()()(),e(24,"div",7)(25,"h2",8),i(26,"Pr\xF3ximos Agendamentos"),n(),e(27,"div",9)(28,"table",10)(29,"thead")(30,"tr",11)(31,"th",12),i(32,"Cliente"),n(),e(33,"th",12),i(34,"Servi\xE7o"),n(),e(35,"th",12),i(36,"Data/Hora"),n(),e(37,"th",12),i(38,"Status"),n()()(),e(39,"tbody"),m(40,j,10,6,"tr",13),n()()()(),e(41,"div",3)(42,"h2",8),i(43,"Feedbacks Recentes"),n(),e(44,"div",14),m(45,H,8,4,"div",15),n()()()),a&2&&(r(8),l((s.estatisticas==null?null:s.estatisticas.agendamentosHoje)||0),r(5),l((s.estatisticas==null?null:s.estatisticas.agendamentosSemana)||0),r(5),l((s.estatisticas==null?null:s.estatisticas.agendamentosMes)||0),r(5),l((s.estatisticas==null?null:s.estatisticas.mediaAvaliacao)||0),r(17),c("ngForOf",s.proximosAgendamentos),r(5),c("ngForOf",s.feedbacksRecentes))},dependencies:[w,D,F],encapsulation:2})}}return o})();export{Y as DashboardComponent};
