import{a as $}from"./chunk-NAROYC5M.js";import{a as N}from"./chunk-Y3QJ5SGF.js";import{b as O,c as C,d as D,e as q,g as G,h as L,j as B,k as R,o as W,p as z,q as Z,r as J,s as K}from"./chunk-DAGYDP6H.js";import{c as P,e as H}from"./chunk-UKOXNQ6D.js";import{a as j}from"./chunk-PP7TIRZV.js";import{Ba as l,Ca as _,Gb as T,Hb as M,Ib as F,Qa as f,Sa as d,Ua as y,Va as o,Wa as i,Xa as x,Ya as v,Za as u,_ as w,_a as c,db as r,eb as E,fb as h,ga as m,gb as V,ha as p,hb as k,ia as b,ib as A,ja as S,kb as I}from"./chunk-JKZU3RR7.js";function X(a,g){if(a&1){let e=v();o(0,"div",13),u("click",function(){let t=m(e).$implicit,s=c(2);return p(s.selecionarServico(t))}),o(1,"h3",14),r(2),i(),o(3,"p",15),r(4),i(),o(5,"div",16)(6,"span",17),r(7),i(),o(8,"span",18),r(9),i()()()}if(a&2){let e=g.$implicit,n=c(2);y("border-secondary",(n.servicoSelecionado==null?null:n.servicoSelecionado.id)===e.id)("bg-yellow-50",(n.servicoSelecionado==null?null:n.servicoSelecionado.id)===e.id)("dark:bg-gray-600",(n.servicoSelecionado==null?null:n.servicoSelecionado.id)===e.id),l(2),E(e.nome),l(2),E(e.descricao),l(3),h("R$ ",e.preco.toFixed(2),""),l(2),h("",e.duracao," min")}}function Y(a,g){if(a&1){let e=v();o(0,"button",19),u("click",function(){m(e);let t=c(2);return p(t.proximoPasso())}),r(1," Pr\xF3ximo "),i()}}function ee(a,g){if(a&1&&(o(0,"div",8)(1,"h2",9),r(2,"1. Escolha o Servi\xE7o"),i(),o(3,"div",10),f(4,X,10,10,"div",11),i(),f(5,Y,2,0,"button",12),i()),a&2){let e=c();l(4),d("ngForOf",e.servicos),l(),d("ngIf",e.servicoSelecionado)}}function te(a,g){if(a&1){let e=v();o(0,"button",28),u("click",function(){let t=m(e).$implicit,s=c(3);return p(s.selecionarHorario(t.dataHora))}),r(1),i()}if(a&2){let e=g.$implicit,n=c(3);y("bg-secondary",n.horarioSelecionado===e.dataHora)("text-primary",n.horarioSelecionado===e.dataHora)("opacity-50",!e.disponivel)("cursor-not-allowed",!e.disponivel),d("disabled",!e.disponivel),l(),h(" ",n.formatarHora(e.dataHora)," ")}}function ie(a,g){if(a&1&&(o(0,"div")(1,"label",21),r(2,"Hor\xE1rio"),i(),o(3,"div",26),f(4,te,2,10,"button",27),i()()),a&2){let e=c(2);l(4),d("ngForOf",e.horarios)}}function ne(a,g){if(a&1){let e=v();o(0,"button",29),u("click",function(){m(e);let t=c(2);return p(t.proximoPasso())}),r(1," Pr\xF3ximo "),i()}}function oe(a,g){if(a&1){let e=v();o(0,"div",8)(1,"h2",9),r(2,"2. Escolha Data e Hor\xE1rio"),i(),o(3,"div",20)(4,"label",21),r(5,"Data"),i(),o(6,"input",22),A("ngModelChange",function(t){m(e);let s=c();return k(s.dataSelecionada,t)||(s.dataSelecionada=t),p(t)}),u("change",function(){m(e);let t=c();return p(t.carregarHorarios())}),i()(),f(7,ie,5,1,"div",5),o(8,"div",23)(9,"button",24),u("click",function(){m(e);let t=c();return p(t.voltarPasso())}),r(10,"Voltar"),i(),f(11,ne,2,0,"button",25),i()()}if(a&2){let e=c();l(6),V("ngModel",e.dataSelecionada),d("min",e.dataMinima),l(),d("ngIf",e.horarios.length>0),l(4),d("ngIf",e.horarioSelecionado)}}function re(a,g){if(a&1){let e=v();o(0,"div")(1,"h2",9),r(2,"3. Seus Dados"),i(),o(3,"form",30),u("ngSubmit",function(){m(e);let t=c();return p(t.confirmarAgendamento())}),o(4,"div")(5,"label",21),r(6,"Nome *"),i(),x(7,"input",31),i(),o(8,"div")(9,"label",21),r(10,"Telefone *"),i(),o(11,"input",32),u("input",function(t){m(e);let s=c();return p(s.aplicarMascaraTelefone(t))}),i()(),o(12,"div")(13,"label",21),r(14,"Email (opcional)"),i(),x(15,"input",33),i(),o(16,"div")(17,"label",21),r(18,"Observa\xE7\xF5es"),i(),x(19,"textarea",34),i(),o(20,"div",23)(21,"button",35),u("click",function(){m(e);let t=c();return p(t.voltarPasso())}),r(22," Voltar "),i(),o(23,"button",36),r(24," Confirmar Agendamento "),i()()()()}if(a&2){let e=c();l(3),d("formGroup",e.formulario),l(20),d("disabled",e.formulario.invalid)}}function ae(a,g){if(a&1){let e=v();o(0,"div",37)(1,"div",38),r(2,"\u2705"),i(),o(3,"h2",39),r(4,"Agendamento Confirmado!"),i(),o(5,"div",40)(6,"p",41)(7,"strong"),r(8,"Obrigado pelo seu interesse!"),i()(),o(9,"p",42),r(10," Este \xE9 um site demonstrativo desenvolvido como projeto de portfolio. "),i(),o(11,"p",42),r(12," Gostou do que viu? Entre em contato conosco para criar um site profissional igual para seu neg\xF3cio! "),i(),o(13,"div",43)(14,"a",44),b(),o(15,"svg",45),x(16,"path",46),i(),r(17," Falar no WhatsApp "),i(),S(),o(18,"a",47),b(),o(19,"svg",48),x(20,"path",49),i(),r(21," Enviar Email "),i()()(),S(),o(22,"button",50),u("click",function(){m(e);let t=c();return p(t.novoAgendamento())}),r(23," Ver Mais Servi\xE7os "),i()()}}var fe=(()=>{class a{constructor(e,n,t,s,Q){this.apiService=e,this.fb=n,this.router=t,this.route=s,this.metaPixel=Q,this.step=1,this.servicos=[],this.dataSelecionada="",this.dataMinima="",this.horarios=[],this.horarioSelecionado="",this.whatsappNumber="5531995729646",this.formulario=this.fb.group({nome:["",C.required],telefone:["",C.required],email:[""],observacoes:[""]});let U=new Date;this.dataMinima=U.toISOString().split("T")[0],this.dataSelecionada=this.dataMinima}ngOnInit(){this.carregarServicos(),this.route.queryParams.subscribe(e=>{if(e.servico){let n=parseInt(e.servico);this.apiService.get(`servicos/${n}`).subscribe({next:t=>{this.selecionarServico(t),this.proximoPasso()}})}})}carregarServicos(){this.apiService.get("servicos",{apenasAtivos:!0}).subscribe({next:e=>{this.servicos=e},error:e=>{console.error("Erro ao carregar servi\xE7os:",e)}})}selecionarServico(e){this.servicoSelecionado=e}proximoPasso(){this.step<4&&(this.step++,this.step===2&&this.carregarHorarios())}voltarPasso(){this.step>1&&this.step--}carregarHorarios(){if(!this.servicoSelecionado||!this.dataSelecionada)return;let e=new Date(this.dataSelecionada);this.apiService.get("agendamentos/horarios-disponiveis",{servicoId:this.servicoSelecionado.id,data:e.toISOString()}).subscribe({next:n=>{this.horarios=n},error:n=>{console.error("Erro ao carregar hor\xE1rios:",n)}})}selecionarHorario(e){this.horarioSelecionado=e}formatarHora(e){return new Date(e).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})}aplicarMascaraTelefone(e){let n=e.target,t=n.value.replace(/\D/g,"");t.length>11&&(t=t.substring(0,11));let s="";t.length===0?s="":t.length<=2?s=`(${t}`:t.length<=6?s=`(${t.substring(0,2)}) ${t.substring(2)}`:t.length<=10?s=`(${t.substring(0,2)}) ${t.substring(2,6)}-${t.substring(6)}`:s=`(${t.substring(0,2)}) ${t.substring(2,7)}-${t.substring(7,11)}`,n.value=s,this.formulario.patchValue({telefone:s},{emitEvent:!1})}confirmarAgendamento(){if(this.formulario.invalid||!this.servicoSelecionado||!this.horarioSelecionado)return;let e={clienteNome:this.formulario.value.nome,clienteTelefone:this.formulario.value.telefone,clienteEmail:this.formulario.value.email||null,servicoId:this.servicoSelecionado.id,dataHora:this.horarioSelecionado,observacoes:this.formulario.value.observacoes||null};this.apiService.post("agendamentos",e).subscribe({next:()=>{this.servicoSelecionado&&this.metaPixel.trackScheduleAppointment(this.servicoSelecionado.id,this.servicoSelecionado.nome,this.servicoSelecionado.preco),this.step=4},error:n=>{console.error("Erro ao criar agendamento:",n),alert("Erro ao confirmar agendamento. Tente novamente.")}})}novoAgendamento(){this.step=1,this.servicoSelecionado=void 0,this.horarioSelecionado="",this.formulario.reset(),this.router.navigate(["/agendamento"])}static{this.\u0275fac=function(n){return new(n||a)(_(j),_(Z),_(H),_(P),_($))}}static{this.\u0275cmp=w({type:a,selectors:[["app-agendamento"]],standalone:!0,features:[I],decls:10,vars:6,consts:[[1,"min-h-screen","bg-gray-100","dark:bg-gray-900","py-12","transition-colors","duration-300"],[1,"container","mx-auto","px-4","max-w-4xl"],[1,"text-3xl","md:text-4xl","font-bold","text-center","mb-8","text-primary"],[1,"card"],["class","space-y-6",4,"ngIf"],[4,"ngIf"],["class","text-center space-y-6",4,"ngIf"],[3,"phoneNumber","message"],[1,"space-y-6"],[1,"text-2xl","font-semibold","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["class","border-2 rounded-lg p-4 cursor-pointer transition-all dark:bg-gray-800 dark:border-gray-700 dark:text-white",3,"border-secondary","bg-yellow-50","dark:bg-gray-600","click",4,"ngFor","ngForOf"],["class","btn-primary w-full",3,"click",4,"ngIf"],[1,"border-2","rounded-lg","p-4","cursor-pointer","transition-all","dark:bg-gray-800","dark:border-gray-700","dark:text-white",3,"click"],[1,"font-bold","text-lg"],[1,"text-gray-600","text-sm","mb-2"],[1,"flex","justify-between"],[1,"font-bold","text-secondary"],[1,"text-sm","text-gray-500"],[1,"btn-primary","w-full",3,"click"],[1,"mb-4"],[1,"block","text-sm","font-medium","mb-2"],["type","date",1,"w-full","p-2","border","rounded-lg",3,"ngModelChange","change","ngModel","min"],[1,"flex","gap-4"],[1,"btn-secondary","flex-1",3,"click"],["class","btn-primary flex-1",3,"click",4,"ngIf"],[1,"grid","grid-cols-4","md:grid-cols-6","gap-2"],["class","p-2 border rounded hover:bg-gray-100 transition",3,"disabled","bg-secondary","text-primary","opacity-50","cursor-not-allowed","click",4,"ngFor","ngForOf"],[1,"p-2","border","rounded","hover:bg-gray-100","transition",3,"click","disabled"],[1,"btn-primary","flex-1",3,"click"],[1,"space-y-4",3,"ngSubmit","formGroup"],["type","text","formControlName","nome","required","",1,"w-full","p-2","border","rounded-lg"],["type","tel","formControlName","telefone","placeholder","(11) 99999-9999","maxlength","15","required","",1,"w-full","p-2","border","rounded-lg",3,"input"],["type","email","formControlName","email",1,"w-full","p-2","border","rounded-lg"],["formControlName","observacoes","rows","3",1,"w-full","p-2","border","rounded-lg"],["type","button",1,"btn-secondary","flex-1",3,"click"],["type","submit",1,"btn-primary","flex-1",3,"disabled"],[1,"text-center","space-y-6"],[1,"text-6xl","mb-4"],[1,"text-2xl","font-semibold","text-success"],[1,"bg-gray-50","rounded-lg","p-6","space-y-4"],[1,"text-gray-700","text-lg"],[1,"text-gray-600"],[1,"flex","flex-col","sm:flex-row","gap-4","justify-center","pt-4"],["href","https://wa.me/5531995729646?text=Ol\xE1! Vi o site da barbearia e fiquei interessado. Gostaria de saber mais sobre os servi\xE7os e como ter um site profissional igual. Podem me ajudar?","target","_blank","rel","noopener noreferrer",1,"btn-primary","inline-flex","items-center","justify-center","gap-2"],["fill","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["d","M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"],["href","mailto:lucimarasouzah@gmail.com?subject=Interesse em Site Profissional",1,"btn-outline","border-secondary","text-secondary","hover:bg-secondary","hover:text-primary","inline-flex","items-center","justify-center","gap-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"],[1,"btn-secondary",3,"click"]],template:function(n,t){n&1&&(o(0,"div",0)(1,"div",1)(2,"h1",2),r(3," Agendar Hor\xE1rio "),i(),o(4,"div",3),f(5,ee,6,2,"div",4)(6,oe,12,4,"div",4)(7,re,25,2,"div",5)(8,ae,24,0,"div",6),i()(),x(9,"app-whatsapp-button",7),i()),n&2&&(l(5),d("ngIf",t.step===1),l(),d("ngIf",t.step===2),l(),d("ngIf",t.step===3),l(),d("ngIf",t.step===4),l(),d("phoneNumber",t.whatsappNumber)("message","Ol\xE1! Fiquei interessado no site que voc\xEAs desenvolveram. Gostaria de saber mais informa\xE7\xF5es sobre como ter um site profissional igual para o meu neg\xF3cio. Podem me ajudar?"))},dependencies:[F,T,M,J,L,O,D,q,W,z,G,K,B,R,N],encapsulation:2})}}return a})();export{fe as AgendamentoComponent};
