import{a as A,b as M,d as N,e as T,h as $,j as O,k as j,q as z,s as G}from"./chunk-DAGYDP6H.js";import{a as I}from"./chunk-HTKU2GHR.js";import{Ba as o,Ca as _,Gb as y,Hb as w,Ib as V,Qa as f,Sa as d,Ua as S,Va as i,Wa as t,Xa as b,Ya as k,Za as u,_ as h,_a as c,db as r,eb as x,fb as g,ga as m,ha as p,ia as E,kb as F,lb as C}from"./chunk-JKZU3RR7.js";var D=()=>[1,2,3,4,5];function B(a,s){a&1&&(E(),i(0,"svg",15),b(1,"path",16),t())}function L(a,s){if(a&1&&(i(0,"span"),f(1,B,2,0,"svg",14),t()),a&2){let e=s.$implicit,n=c().$implicit;o(),d("ngIf",e<=n.avaliacao)}}function P(a,s){if(a&1){let e=k();i(0,"tr",5)(1,"td",9),r(2),t(),i(3,"td",9)(4,"div",10),f(5,L,2,1,"span",11),t()(),i(6,"td",9),r(7),t(),i(8,"td",9)(9,"span"),r(10),t()(),i(11,"td",9)(12,"button",12),u("click",function(){let l=m(e).$implicit,v=c();return p(v.editar(l))}),r(13,"Editar"),t(),i(14,"button",13),u("click",function(){let l=m(e).$implicit,v=c();return p(v.excluir(l.id))}),r(15,"Excluir"),t()()()}if(a&2){let e=s.$implicit;o(2),x(e.nome),o(3),d("ngForOf",C(8,D)),o(2),g("",e.comentario.substring(0,50),"..."),o(2),S("text-green-600",e.aprovado)("text-red-600",!e.aprovado),o(),g(" ",e.aprovado?"Aprovado":"Pendente"," ")}}function R(a,s){if(a&1){let e=k();i(0,"div",17)(1,"div",18)(2,"h2",19),r(3,"Editar Feedback"),t(),i(4,"form",20),u("ngSubmit",function(){m(e);let l=c();return p(l.salvar())}),i(5,"div")(6,"p",21),r(7),t(),i(8,"p",22),r(9),t()(),i(10,"div")(11,"label",23),b(12,"input",24),r(13," Aprovado para exibi\xE7\xE3o p\xFAblica "),t()(),i(14,"div")(15,"label",25),r(16,"Resposta (opcional)"),t(),b(17,"textarea",26),t(),i(18,"div",27)(19,"button",28),u("click",function(){m(e);let l=c();return p(l.fecharModal())}),r(20,"Cancelar"),t(),i(21,"button",29),r(22,"Salvar"),t()()()()()}if(a&2){let e=c();o(4),d("formGroup",e.formulario),o(3),x(e.feedbackEditando.nome),o(2),x(e.feedbackEditando.comentario)}}var W=(()=>{class a{constructor(e,n){this.apiService=e,this.fb=n,this.feedbacks=[],this.mostrarModal=!1,this.formulario=this.fb.group({aprovado:[!1],respostaAdmin:[""]})}ngOnInit(){this.carregarFeedbacks()}carregarFeedbacks(){this.apiService.get("feedbacks").subscribe({next:e=>{this.feedbacks=e},error:e=>{console.error("Erro ao carregar feedbacks:",e)}})}editar(e){this.feedbackEditando=e,this.formulario.patchValue({aprovado:e.aprovado,respostaAdmin:e.respostaAdmin||""}),this.mostrarModal=!0}fecharModal(){this.mostrarModal=!1,this.feedbackEditando=void 0}salvar(){if(!this.feedbackEditando)return;let e=this.formulario.value;this.apiService.put(`feedbacks/${this.feedbackEditando.id}`,e).subscribe({next:()=>{this.carregarFeedbacks(),this.fecharModal()},error:n=>{console.error("Erro ao atualizar feedback:",n),alert("Erro ao salvar feedback")}})}excluir(e){confirm("Tem certeza que deseja excluir este feedback?")&&this.apiService.delete(`feedbacks/${e}`).subscribe({next:()=>{this.carregarFeedbacks()},error:n=>{console.error("Erro ao excluir feedback:",n),alert("Erro ao excluir feedback")}})}static{this.\u0275fac=function(n){return new(n||a)(_(I),_(z))}}static{this.\u0275cmp=h({type:a,selectors:[["app-admin-feedbacks"]],standalone:!0,features:[F],decls:21,vars:2,consts:[[1,"space-y-4","sm:space-y-6"],[1,"text-2xl","sm:text-3xl","font-bold","text-primary","dark:text-white"],[1,"card","overflow-hidden"],[1,"overflow-x-auto"],[1,"w-full","min-w-[700px]"],[1,"border-b"],[1,"text-left","p-2"],["class","border-b",4,"ngFor","ngForOf"],["class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2 sm:p-4",4,"ngIf"],[1,"p-2"],[1,"flex","text-yellow-400"],[4,"ngFor","ngForOf"],[1,"text-blue-600","mr-2",3,"click"],[1,"text-red-600",3,"click"],["class","w-4 h-4 fill-current","viewBox","0 0 20 20",4,"ngIf"],["viewBox","0 0 20 20",1,"w-4","h-4","fill-current"],["d","M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"],[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","z-50","p-2","sm:p-4"],[1,"bg-gray-100","rounded-lg","p-4","sm:p-6","max-w-md","w-full","max-h-[95vh]","overflow-y-auto","dark:bg-gray-900"],[1,"text-2xl","font-bold","mb-4"],[1,"space-y-4",3,"ngSubmit","formGroup"],[1,"font-semibold"],[1,"text-gray-600","text-sm","mb-2"],[1,"flex","items-center"],["type","checkbox","formControlName","aprovado",1,"mr-2"],[1,"block","text-sm","font-medium","mb-2"],["formControlName","respostaAdmin","rows","3",1,"w-full","p-2","border","rounded-lg"],[1,"flex","gap-4"],["type","button",1,"btn-secondary","flex-1",3,"click"],["type","submit",1,"btn-primary","flex-1"]],template:function(n,l){n&1&&(i(0,"div",0)(1,"h1",1),r(2,"Feedbacks"),t(),i(3,"div",2)(4,"div",3)(5,"table",4)(6,"thead")(7,"tr",5)(8,"th",6),r(9,"Nome"),t(),i(10,"th",6),r(11,"Avalia\xE7\xE3o"),t(),i(12,"th",6),r(13,"Coment\xE1rio"),t(),i(14,"th",6),r(15,"Status"),t(),i(16,"th",6),r(17,"A\xE7\xF5es"),t()()(),i(18,"tbody"),f(19,P,16,9,"tr",7),t()()()(),f(20,R,23,3,"div",8),t()),n&2&&(o(19),d("ngForOf",l.feedbacks),o(),d("ngIf",l.mostrarModal&&l.feedbackEditando))},dependencies:[V,y,w,G,$,M,A,N,T,O,j],encapsulation:2})}}return a})();export{W as FeedbacksComponent};
